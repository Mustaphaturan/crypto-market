{"ast":null,"code":"import { BaseChartDirective } from 'ng2-charts';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../service/currency.service\";\nimport * as i4 from \"ng2-charts\";\nimport * as i5 from \"@angular/common\";\nexport let CoinDetailComponent = /*#__PURE__*/(() => {\n  class CoinDetailComponent {\n    constructor(api, activatedRoute, currencyService) {\n      this.api = api;\n      this.activatedRoute = activatedRoute;\n      this.currencyService = currencyService;\n      this.days = 30;\n      this.currency = 'EUR';\n      this.lineChartData = {\n        datasets: [{\n          data: [],\n          label: `Price Trends`,\n          backgroundColor: 'rgba(148,159,177,0.2)',\n          borderColor: '#009688',\n          pointBackgroundColor: '#009688',\n          pointBorderColor: '#009688',\n          pointHoverBackgroundColor: '#009688',\n          pointHoverBorderColor: '#009688'\n        }],\n        labels: []\n      };\n      this.lineChartOptions = {\n        elements: {\n          point: {\n            radius: 1\n          }\n        },\n        plugins: {\n          legend: {\n            display: true\n          }\n        }\n      };\n      this.lineChartType = 'line';\n    }\n\n    ngOnInit() {\n      this.activatedRoute.params.subscribe(val => {\n        this.coinId = val['id'];\n      });\n      this.getCoinData();\n      this.getGraphData(this.days);\n      this.currencyService.getCurrency().subscribe(val => {\n        this.currency = val;\n        this.getGraphData(this.days);\n        this.getCoinData();\n      });\n    }\n\n    getCoinData() {\n      this.api.getCurrencyById(this.coinId).subscribe(res => {\n        this.coinData = res;\n        console.log(this.coinData);\n\n        if (this.currency === 'USD') {\n          res.market_data.current_price.eur = res.market_data.current_price.usd;\n          res.market_data.market_cap.eur = res.market_data.market_cap.usd;\n        }\n\n        res.market_data.current_price.eur = res.market_data.current_price.eur;\n        res.market_data.market_cap.eur = res.market_data.market_cap.eur;\n        this.coinData = res;\n      });\n    }\n\n    getGraphData(days) {\n      this.days = days;\n      this.api.getGraphicalCurrencyData(this.coinId, this.currency, this.days).subscribe(res => {\n        setTimeout(() => {\n          var _a;\n\n          (_a = this.myLineChart.chart) === null || _a === void 0 ? void 0 : _a.update();\n        }, 200);\n        this.lineChartData.datasets[0].data = res.prices.map(a => {\n          return a[1];\n        });\n        this.lineChartData.labels = res.prices.map(a => {\n          let date = new Date(a[0]);\n          let time = date.getHours() > 12 ? `${date.getHours() - 12}: ${date.getMinutes()} PM` : `${date.getHours()}: ${date.getMinutes()} AM`;\n          return this.days === 1 ? time : date.toLocaleDateString();\n        });\n      });\n    }\n\n  }\n\n  CoinDetailComponent.ɵfac = function CoinDetailComponent_Factory(t) {\n    return new (t || CoinDetailComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.CurrencyService));\n  };\n\n  CoinDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CoinDetailComponent,\n    selectors: [[\"app-coin-detail\"]],\n    viewQuery: function CoinDetailComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(BaseChartDirective, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.myLineChart = _t.first);\n      }\n    },\n    decls: 36,\n    vars: 15,\n    consts: [[1, \"container-fluid\"], [1, \"row\"], [1, \"col-md-3\", \"details\"], [1, \"img\"], [\"alt\", \"\", 3, \"src\"], [1, \"text-center\", 2, \"font-size\", \"23px\"], [3, \"innerHtml\"], [1, \"more-detail\"], [1, \"title\"], [1, \"value\"], [1, \"col-md-8\"], [\"baseChart\", \"\", 2, \"width\", \"300px\", 3, \"data\", \"options\", \"type\"], [1, \"d-flex\", \"justify-content-around\"], [1, \"btn\", \"btn-custom\", 3, \"click\"]],\n    template: function CoinDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n        i0.ɵɵelement(4, \"img\", 4);\n        i0.ɵɵelementStart(5, \"h3\", 5);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"h2\", 6);\n        i0.ɵɵelementStart(8, \"div\", 7)(9, \"span\", 8);\n        i0.ɵɵtext(10, \"Rank : \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"span\", 9);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"br\");\n        i0.ɵɵelementStart(14, \"span\", 8);\n        i0.ɵɵtext(15, \"Current Price : \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"span\", 9);\n        i0.ɵɵtext(17);\n        i0.ɵɵpipe(18, \"currency\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"br\");\n        i0.ɵɵelementStart(20, \"span\", 8);\n        i0.ɵɵtext(21, \"Market Cap : \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"span\", 9);\n        i0.ɵɵtext(23);\n        i0.ɵɵpipe(24, \"currency\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(25, \"div\", 10);\n        i0.ɵɵelement(26, \"canvas\", 11);\n        i0.ɵɵelementStart(27, \"div\", 12)(28, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function CoinDetailComponent_Template_button_click_28_listener() {\n          return ctx.getGraphData(1);\n        });\n        i0.ɵɵtext(29, \"24 Hours\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function CoinDetailComponent_Template_button_click_30_listener() {\n          return ctx.getGraphData(30);\n        });\n        i0.ɵɵtext(31, \"30 Days\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function CoinDetailComponent_Template_button_click_32_listener() {\n          return ctx.getGraphData(90);\n        });\n        i0.ɵɵtext(33, \"3 Month\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function CoinDetailComponent_Template_button_click_34_listener() {\n          return ctx.getGraphData(365);\n        });\n        i0.ɵɵtext(35, \"1 Year\");\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"src\", ctx.coinData == null ? null : ctx.coinData.image == null ? null : ctx.coinData.image.large, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.coinData == null ? null : ctx.coinData.name);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"innerHtml\", ctx.coinData == null ? null : ctx.coinData.description == null ? null : ctx.coinData.description.en.split(\". \")[0], i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.coinData == null ? null : ctx.coinData.market_cap_rank);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(18, 9, ctx.coinData == null ? null : ctx.coinData.market_data.current_price.eur, ctx.currency));\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(24, 12, ctx.coinData == null ? null : ctx.coinData.market_data.market_cap.eur, ctx.currency));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"data\", ctx.lineChartData)(\"options\", ctx.lineChartOptions)(\"type\", ctx.lineChartType);\n      }\n    },\n    directives: [i4.BaseChartDirective],\n    pipes: [i5.CurrencyPipe],\n    styles: [\".details[_ngcontent-%COMP%]{width:30%;display:flex;margin-top:25px;align-items:center;flex-direction:column}.details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;margin-bottom:20px}.details[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{width:100%;padding:0 25px 15px;text-align:justify}.img[_ngcontent-%COMP%]{background:transparent;margin:auto;display:flex;flex-direction:column}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0;display:flex}.more-detail[_ngcontent-%COMP%]{padding:0;margin:10px;line-height:50px}.more-detail[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:30px;font-weight:600px}.more-detail[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:30px;font-weight:500px}.btn-custom[_ngcontent-%COMP%]{color:#fff;background:transparent;font-weight:400;font-size:18px;border:1px solid #fff;width:23%}.btn-custom[_ngcontent-%COMP%]:focus{background:#009688;font-weight:700;font-size:18px;border:1px solid #009688}*[_ngcontent-%COMP%]{color:#fff}\"]\n  });\n  return CoinDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}